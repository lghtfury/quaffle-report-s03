<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Quaffle Report • Viewer</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0b0c; --panel:#101010; --text:#f1f1f1; --muted:#bdbdbd;
    --gold:#d6b36a; --line:rgba(214,179,106,.25);
    --row:rgba(214,179,106,.06); --row2:rgba(255,255,255,.03);
    --shadow:0 18px 58px rgba(0,0,0,.55); --r:16px;
  }
  html,body{height:100%;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0}
  .wrap{min-height:100vh;display:grid;grid-template-rows:auto 1fr}
  header{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,rgba(0,0,0,.65),rgba(0,0,0,.25))}
  header .crumb{font-size:12px;color:var(--muted)}
  .stage{padding:20px}
  .card{max-width:1360px;margin:0 auto;background:linear-gradient(180deg,#111,#0c0c0c);border:1px solid var(--line);border-radius:var(--r);box-shadow:var(--shadow);padding:18px}
  h1,h2,h3,h4{margin:0 0 10px}
  .center{display:grid;place-items:center;text-align:center}
  .hero{min-height:calc(100vh - 90px);position:relative;overflow:hidden}
  .hero-inner{display:grid;place-items:center;height:100%}
  .qr{width:min(36vw,440px);height:auto;opacity:0;transform:scale(.94);
      filter:drop-shadow(0 12px 40px rgba(214,179,106,.22));
      transition:opacity .6s ease,transform .8s cubic-bezier(.2,.9,.2,1)}
  .qr.on{opacity:1;transform:scale(1);animation:pulse 2.1s ease-in-out .6s infinite}
  @keyframes pulse{0%,100%{transform:scale(1)}50%{transform:scale(1.025)}}
  .hero h1{font-size:clamp(28px,4vw,54px);font-weight:800;margin-top:22px}
  .sub{opacity:.85}
  .pill{position:absolute;left:50%;transform:translateX(-50%);bottom:20px;font-size:12px;padding:6px 12px;border:1px solid rgba(214,179,106,.35);border-radius:999px;background:rgba(214,179,106,.06)}
  table{width:100%;border-collapse:collapse;font-size:14px}
  thead th{padding:12px 14px;text-align:left;color:var(--muted);border-bottom:1px solid var(--line)}
  tbody td{padding:12px 14px;border-bottom:1px solid var(--row2)}
  tbody tr:nth-child(odd){background:var(--row2)} tbody tr:hover{background:var(--row)}
  .teamcell{display:flex;align-items:center;gap:10px}
  .logo{height:28px;width:28px;border-radius:10px}
  .team-header{display:grid;grid-template-columns:280px 1fr 320px;gap:16px;align-items:center}
  .t-left{display:flex;gap:12px;align-items:center}
  .t-left img{height:92px;width:92px;border-radius:16px;box-shadow:0 12px 32px rgba(0,0,0,.45)}
  .t-mid{text-align:center} .t-mid h3{font-size:34px;font-weight:800}
  .t-right{text-align:right}
  .grid-3{display:grid;grid-template-columns:300px 1fr 320px;gap:16px;margin-top:12px}
  .panel{background:var(--panel);border:1px solid var(--line);border-radius:var(--r);padding:16px}
  .panel h4{margin-bottom:8px}
  .roster ul{list-style:none;margin:0;padding:0;columns:2;column-gap:14px}
  .roster li{padding:4px 0;border-bottom:1px dashed rgba(255,255,255,.06)}
  @media (max-width:1100px){.team-header{grid-template-columns:160px 1fr 1fr}.grid-3{grid-template-columns:1fr}.roster ul{columns:1}}
  .hint{font-size:12px;color:var(--muted)}
  .reveal{user-select:none;border:1px dashed var(--line);padding:12px;border-radius:10px;cursor:pointer;background:rgba(255,255,255,.02)}
  .reveal.open{border-style:solid;background:rgba(214,179,106,.06)}
</style>
</head>
<body>
<div class="wrap">
  <header>
    <div class="crumb" id="crumb">Quaffle Report • Viewer</div>
    <div class="hint">F11 for full-screen • ← / → to cycle</div>
  </header>
  <div class="stage" id="stage"></div>
</div>

<script>
/* ---------- Image helpers (now using /assets) ---------- */
const LOGO_MAP = {
  RVN:'knockturn_ravens.png', HAG:'wildcard_hagrids.png', HOG:'hellfire_hogs.png',
  OWL:'oakshaft_owls.png', OP:'obscurus_quidditch_club.png', // OP has its own file too; swap if you prefer
  OP_FILE:'the_order_of_the_phoenoobz.png',
  CC:'crazy_comms.png', TI:'oakshaft_owls.png', // placeholder fixed below
  DQC:'dumbledorks_quidditch_club.png',
  BD:'bad_dwagons.png', NHK:'nimbus_nighthawks.png', BNG:'azkabangers.png',
  OBS:'obscurus_quidditch_club.png'
};
// correct Thin Ice + OP
LOGO_MAP.TI = 'thin_ice.png';
LOGO_MAP.OP  = 'the_order_of_the_phoenoobz.png';

function imgWithFallback(el, files){
  let i=0; const tryNext=()=>{ if(i>=files.length) return; el.onerror=()=>{i++;tryNext()}; el.src=`assets/${files[i++]}`; };
  tryNext();
}

/* ---------- Standings (Season 3) ---------- */
const TRI = {
  table: [
    ['RVN','Knockturn Ravens',3,6,'66.7%',650,460,4,9],
    ['HAG','Wildcard Hagrids',3,6,'66.7%',640,570,4,9],
    ['HOG','Hellfire Hogs',2,6,'60.0%',710,610,4,10],
    ['OWL','Oakshaft Owls',2,5,'50.0%',730,730,4,10],
    ['OP','The Order of the Phoenoobz',0,0,'0.0%',300,660,4,8],
  ],
  h2h: [
    ['Hellfire Hogs','—','0-2','1-2','2-0','1-2'],
    ['Knockturn Ravens','2-0','—','2-1','2-0','2-0'],
    ['Oakshaft Owls','2-1','1-2','—','2-0','0-2'],
    ['The Order of the Phoenoobz','0-2','0-2','0-2','—','0-2'],
    ['Wildcard Hagrids','2-1','0-2','2-0','2-0','—'],
  ],
  cols: ['Hellfire Hogs','Knockturn Ravens','Oakshaft Owls','The Order of the Phoenoobz','Wildcard Hagrids']
};

const WC = {
  table: [
    ['CC','Crazy Comms',6,12,'85.7%',1110,420,6,14],
    ['BNG','Azkabangers',5,10,'71.4%',1040,720,6,14],
    ['DQC','Dumbledorks Quidditch Club',4,10,'58.8%',1010,930,6,17],
    ['TI','Thin Ice',3,9,'60.0%',1060,790,6,15],
    ['BD','Bad Dwagons',2,5,'35.7%',710,840,6,14],
    ['OBS','Obscurus Quidditch Club',1,3,'23.1%',400,970,6,13],
    ['NHK','Nimbus Nighthawks',0,1,'7.7%',450,1110,6,13],
  ],
  cols: ['Azkabangers','Bad Dwagons','Crazy Comms','Dumbledorks Quidditch Club','Nimbus Nighthawks','Obscurus Quidditch Club','Thin Ice'],
  h2h: [
    ['Azkabangers','—','2-0','0-2','2-1','2-0','2-0','2-1'],
    ['Bad Dwagons','0-2','—','0-2','1-2','2-1','2-0','0-2'],
    ['Crazy Comms','2-0','2-0','—','2-1','2-0','2-0','2-1'],
    ['Dumbledorks Quidditch Club','1-2','2-1','1-2','—','2-0','2-1','2-1'],
    ['Nimbus Nighthawks','0-2','1-2','0-2','0-2','—','0-2','0-2'],
    ['Obscurus Quidditch Club','0-2','0-2','0-2','1-2','2-0','—','0-2'],
    ['Thin Ice','1-2','2-0','1-2','1-2','2-0','2-0','—'],
  ]
};

/* ---------- Rosters + captains (Season 3) ---------- */
const TEAMS = {
  HOG:{name:'Hellfire Hogs', cap:'Moonech', co:'CraftyCat9',
    roster:['Moonech','CraftyCat9','Tamaquashad','Udomorn','Sweeping-flower3','NamesVALOR','RitchieCootes','luketurner','xOofPSN'],
    mb:[['vs Knockturn Ravens','0-2'],['vs Oakshaft Owls','1-2'],['vs The Order of the Phoenoobz','2-0'],['vs Wildcard Hagrids','1-2']],
    note:'Founder Melanore’s league; Hogs captain is Moonech.'
  },
  RVN:{name:'Knockturn Ravens', cap:'DBRiley', co:'Pwatt86',
    roster:['DBRiley','timetwister2122','Kuragamie','PWatt86','Malikosis','ATelemarketer','DKaas','chaoscreature29','ItsLuna','Hawkeye'],
    mb:[['vs Hellfire Hogs','2-0'],['vs Oakshaft Owls','2-1'],['vs The Order of the Phoenoobz','2-0'],['vs Wildcard Hagrids','2-0']],
    note:'#1 seed. Riley passing armband to Pwatt due to injury.'
  },
  OWL:{name:'Oakshaft Owls', cap:'OlympusMew', co:'—',
    roster:['OlympusMew','Tantrum1x','FM','Darkshadowfox91','FasterEddy135','Stormywhether','ItsSayruh','Chemicool516','Potology'],
    mb:[['vs Hellfire Hogs','2-1'],['vs Knockturn Ravens','1-2'],['vs The Order of the Phoenoobz','2-0'],['vs Wildcard Hagrids','0-2']],
    note:'No co-captain listed.'
  },
  OP:{name:'The Order of the Phoenoobz', cap:'Cleet716', co:'Warbeard',
    roster:['Cleet716','WARB E4RD','OiledupDaddyHog','MegWood','CrazyChiika','NKatie22','Silverlimb7182','RealityOverload','Emera1d0wl','DoubleM_M46'],
    mb:[['vs Hellfire Hogs','0-2'],['vs Knockturn Ravens','0-2'],['vs Oakshaft Owls','0-2'],['vs Wildcard Hagrids','0-2']],
    note:'Hunting first series win.'
  },
